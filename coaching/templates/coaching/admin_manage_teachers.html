{% extends 'coaching/base.html' %}
{% block title %}Manage Teachers{% endblock %}
{% block content %}
<div class="container" style="max-width:700px;margin-top:40px;">
    <h1 style="color:#f59e42;font-size:2em;">Manage Teacher Accounts</h1>
    <hr>
    <table style="width:100%;border-collapse:collapse;margin-top:24px;">
        <thead>
            <tr style="background:#fbbf24;color:#fff;">
                <th style="padding:10px 6px;">Username</th>
                <th style="padding:10px 6px;">Email</th>
                <th style="padding:10px 6px;">Active</th>
                <th style="padding:10px 6px;">Approved</th>
                <th style="padding:10px 6px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for teacher in teachers %}
            <tr style="background:#fff;border-bottom:1px solid #f3f4f6;">
                <td style="padding:10px 6px;">{{ teacher.username }}</td>
                <td style="padding:10px 6px;">{{ teacher.email }}</td>
                <td style="padding:10px 6px;">{% if teacher.is_active %}Yes{% else %}No{% endif %}</td>
                <td style="padding:10px 6px;">N/A</td>
                <td style="padding:10px 6px;">
                    <form method="post" action="{% url 'admin_manage_teachers' %}" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="teacher_id" value="{{ teacher.id }}">
                        <!-- Approve button hidden: profile/is_approved not implemented -->
                        <a href="/admin/auth/user/{{ teacher.id }}/change/" style="color:#6366f1;text-decoration:underline;margin:0 8px;">Edit</a>
                        <button type="submit" name="action" value="remove" style="background:#ef4444;color:#fff;border:none;padding:6px 12px;border-radius:5px;cursor:pointer;">Remove</button>
                    </form>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="5" style="text-align:center;padding:18px;">No teachers found.</td></tr>
            {% endfor %}
        </tbody>
    </table>
    <div style="margin-top:24px;">
        <a href="/admin/auth/user/add/" style="background:linear-gradient(90deg,#6366f1 60%,#22d3ee 100%);color:#fff;padding:10px 22px;border-radius:8px;text-decoration:none;font-weight:600;">Add New Teacher</a>
    </div>
</div>
<style>
@media (max-width: 700px) {
    .container {
        padding: 0 4px !important;
        min-width: 0;
    }
    table {
        font-size: 0.95em;
        word-break: break-word;
        display: block;
        overflow-x: auto;
        width: 100%;
        background: #fff;
        /* Remove position and z-index entirely */
    }
    thead, tbody, tr {
        display: table;
        width: 100%;
        table-layout: fixed;
    }
    th, td {
        padding: 8px 2px !important;
        font-size: 0.98em;
    }
    h1 {
        font-size: 1.2em !important;
    }
}
</style>
<script>
// Fix for navbar toggle not working due to event bubbling or overlay
// This script must be included in every template with custom CSS/JS that could affect stacking
// If already present in base.html, this will not hurt
    document.addEventListener('DOMContentLoaded', function() {
        const toggle = document.querySelector('.navbar-toggle');
        const navLinks = document.querySelector('.nav-links');
        if (toggle && navLinks) {
            toggle.addEventListener('click', function(e) {
                e.stopPropagation();
                navLinks.classList.toggle('open');
            });
            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    navLinks.classList.remove('open');
                });
            });
            document.addEventListener('click', function(e) {
                if (navLinks.classList.contains('open') && !navLinks.contains(e.target) && !toggle.contains(e.target)) {
                    navLinks.classList.remove('open');
                }
            });
        }
    });
</script>
{% endblock %}
